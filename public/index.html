<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esp√≠a - Multiplayer</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="https://fav.farm/üïµÔ∏è">
    <script src="/socket.io/socket.io.js"></script>
</head>

<body>
    <nav>
        <span class="nav-logo">üïµÔ∏è AGENTE SECRETO</span>
        <div style="display: flex; gap: 0.5rem; align-items: center;">
            <button id="secret-cheat-btn" class="hidden"
                style="background: transparent; border: none; cursor: pointer; font-size: 1rem; opacity: 0.1;">ü§´</button>
            <a href="/admin" class="btn btn-secondary" style="padding: 0.5rem; font-size: 0.7rem;">ADMIN</a>
        </div>
    </nav>

    <!-- SCREEN: HOME -->
    <main id="screen-home" class="container glass-panel">
        <h1>Misi√≥n Encubierta</h1>
        <p>Juego multijugador de deducci√≥n.</p>

        <div class="control-group">
            <label>Tu Nombre de Agente</label>
            <input type="text" id="input-name" placeholder="Ej: 007" maxlength="10">
        </div>

        <div style="display: flex; flex-direction: column; gap: 1rem; width: 100%;">
            <button id="btn-create-room" class="btn">CREAR SALA NUEVA</button>

            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                <input type="text" id="input-room-code" placeholder="C√ìDIGO" style="text-transform: uppercase;">
                <button id="btn-join-room" class="btn btn-secondary">UNIRSE</button>
            </div>
        </div>
    </main>

    <!-- SCREEN: LOBBY -->
    <main id="screen-lobby" class="container glass-panel hidden">
        <h2 style="margin-bottom: 0;">SALA: <span id="lobby-code" class="highlight-text">????</span></h2>
        <p>Esperando agentes...</p>

        <div id="lobby-players" class="word-list" style="margin: 2rem 0;">
            <!-- Players injected here -->
        </div>

        <div id="host-controls" class="hidden">
            <div class="control-group">
                <label>Esp√≠as</label>
                <input type="number" id="lobby-spies" value="1" min="1" max="3">
            </div>
            <button id="btn-start-game" class="btn" style="width: 100%;">INICIAR MISI√ìN</button>
        </div>
        <p id="waiting-msg" class="hidden">Esperando al l√≠der...</p>
    </main>

    <!-- SCREEN: REVEAL (Interactive Card) -->
    <main id="screen-reveal" class="container glass-panel hidden" style="perspective: 1000px;">
        <h2>Identidad Secreta</h2>

        <div id="identity-card" class="card-interaction-zone">
            <div class="card-wrapper">
                <div class="card-face card-front">
                    <div style="font-size: 5rem; margin-bottom: 1rem;">üîí</div>
                    <p style="font-weight: 800;">TOP SECRET</p>
                    <p style="font-size: 0.8rem; opacity: 0.7;">MANT√âN PARA LEER</p>
                </div>
                <div class="card-face card-back">
                    <p style="text-transform: uppercase; letter-spacing: 2px; font-size: 0.8rem; margin-bottom: 2rem;">
                        Clasificado</p>
                    <div id="role-display" class="role-text">???</div>
                    <p id="category-display" style="opacity: 0.7;">???</p>
                    <div id="teammates-container" class="hidden"
                        style="margin-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 0.5rem; width: 80%;">
                        <p style="font-size: 0.7rem; opacity: 0.5; margin-bottom: 0.3rem;">TUS COMPA√ëEROS:</p>
                        <p id="teammates-list" style="font-size: 0.9rem; font-weight: bold; color: var(--secondary);">
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <p style="margin-top: 2rem; font-size: 0.9rem; opacity: 0.6;">Espera a que todos confirmen...</p>
    </main>

    <!-- SCREEN: GAME / TIMER -->
    <main id="screen-game" class="container glass-panel hidden">
        <h1>¬°Debate en Curso!</h1>
        <div id="timer" class="timer-display">05:00</div>

        <div id="host-game-controls" class="hidden">
            <button id="btn-reveal-game" class="btn btn-danger">RESOLVER / VOTAR</button>
        </div>
        <p id="citizen-msg">Encuentren al esp√≠a.</p>
    </main>

    <!-- SCREEN: VOTING -->
    <main id="screen-voting" class="container glass-panel hidden">
        <h2>¬øQui√©n es el Esp√≠a?</h2>
        <p>Selecciona un jugador para votar.</p>

        <div id="voting-players-container" class="word-list" style="margin: 2rem 0;">
            <!-- Players to vote for injected here -->
        </div>

        <p id="voting-status" class="hidden" style="color: #4cd137;">¬°Voto registrado! Esperando...</p>
    </main>

    <!-- SCREEN: RESULTS -->
    <main id="screen-results" class="container glass-panel hidden">
        <h1>Informe Final</h1>
        <div class="result-card">
            <p>La palabra era:</p>
            <h2 id="result-word" class="highlight-text">???</h2>
        </div>
        <div id="result-players" class="word-list"></div>
        <button id="btn-restart-game" class="btn hidden" style="margin-top: 1rem; width: 100%;">JUGAR OTRA VEZ
            (LOBBY)</button>
        <button id="btn-exit-game" class="btn btn-secondary" style="margin-top: 1rem;">SALIR</button>
    </main>

    <!-- CHEAT PANEL MODAL -->
    <div id="cheat-modal" class="modal hidden">
        <div class="modal-content glass-panel">
            <span class="close-modal">&times;</span>
            <h2 style="color: var(--accent);">Panel de Control Maestro</h2>
            <div id="cheat-content">
                <p>Cargando datos de inteligencia...</p>
            </div>
            <button id="btn-refresh-cheat" class="btn btn-secondary" style="width: 100%; margin-top: 1rem;">ACTUALIZAR
                DATOS</button>
        </div>
    </div>

    <!-- GLOBAL EXIT BUTTON -->
    <button id="global-exit-btn" class="global-exit-btn hidden" title="Salir de la sala">‚úï</button>

    <script src="js/game.js"></script>
</body>

</html>